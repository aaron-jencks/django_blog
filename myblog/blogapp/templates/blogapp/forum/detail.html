{% extends 'blogapp/base.html' %}

{% block content %}
<h1 class="articleTitle">{{ askpost.question_title }} ( {{ hitcount.total_hits }} views)</h1>
<div id=blogPostBody style="margin: 20px">
	{{ askpost.text | safe }}
</div>
<br>
<div id="commentsSection">
{% if askpost.askanswer_set.all.count > 0 %}
	<h2>Answers({{askpost.askanswer_set.all.count}})</h2><br>
	{% for answer in askpost.askanswer_set.all %}
		<div class="comment">
			<div class="content">
				<p>{{answer.text | safe}}</p>
			</div>
			<div class="author">
				<p class="authorText"><b>{{answer.author}}</b></p>
				<p class="date">{{answer.pub_date}}</p>
			</div>
		</div>
	{% endfor %}
{% else %}
	<h2>Answers(0)</h2><br>
	<p style="margin: 15px">No answers yet...</p>
{% endif %}
{% if askpost.forumcomment_set %}
	<h2>Comments({{askpost.forumcomment_set.all.count}})</h2><br>
	{% for comment in askpost.forumcomment_set.all %}
		<div class="comment">
			<div class="content">
				<p>{{comment.text}}</p>
			</div>
			<div class="author">
				<p class="authorText"><b>{{comment.author}}</b></p>
				<p class="date">{{comment.pub_date}}</p>
			</div>
		</div>
	{% endfor %}
{% else %}
	<h2>Comments(0)</h2><br>
	<p style="margin: 15px">No comments to show...</p>
{% endif %}
	<form id="commentForm" action="{% url 'blogs:forumcomment' askpost.id %}" method="post" style="width: 50%;">
		{% csrf_token %}
		{% if comment_error_message %}
			<p style="color: red;">{{ comment_error_message }}</p>
		{% endif %}
		Display-name:<br>
		<input type="text" name="username" value=""><br>
		Comment:<br>
		<textarea type="text" name="commentText" style="width: 75%;" rows="10"></textarea><br>
		<input type="submit" value="Comment">
	</form>
</div>
{% endblock %}